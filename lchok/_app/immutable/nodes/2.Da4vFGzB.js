import{j as Me,o as se,d as f,t as C,p as Ie,e as ne,l as re}from"../chunks/disclose-version.hFCv5rWK.js";import{y as de,E as p,G as T,F as h,C as V,g as a,B as ve,J as L,I as ae,K as Se,a3 as oe,D as Ge}from"../chunks/runtime.C39EhFeH.js";import{s as me}from"../chunks/render.DTTxfmh4.js";import{a as B,r as Te,o as Le,i as D}from"../chunks/index-client.0S0UEiCn.js";import{e as ce,s as ke,f as Re,i as ie}from"../chunks/date.DdWoHAyD.js";import{c as qe,a as N,d as Be,l as Ce,g as s,n as Ee,e as W,B as le,s as Pe}from"../chunks/Button.DpDhyKBR.js";import{g as ue}from"../chunks/entry.h1qcwv0P.js";const w={l:[1,.3963377774,.2158037573],m:[1,-.1055613458,-.0638541728],s:[1,-.0894841775,-1.291485548]},M={r:[4.0767416621,-3.3077115913,.2309699292],g:[-1.2684380046,2.6097574011,-.3413193965],b:[-.0041960863,-.7034186147,1.707614701]},ye=.0031308,Oe=.4;function De(n,t,e){const c=w.l[0]*n+w.l[1]*t+w.l[2]*e,d=w.m[0]*n+w.m[1]*t+w.m[2]*e,m=w.s[0]*n+w.s[1]*t+w.s[2]*e,v=c**3,I=d**3,x=m**3;return[M.r[0]*v+M.r[1]*I+M.r[2]*x,M.g[0]*v+M.g[1]*I+M.g[2]*x,M.b[0]*v+M.b[1]*I+M.b[2]*x]}function Ve(n){return n<=ye?12.92*n:1.055*n**(1/2.4)-.055}function ge(n,t,e){const c=e*Math.PI/180,d=t*Math.cos(c),m=t*Math.sin(c);return De(n,d,m).map(Ve).map(x=>Math.round(Math.max(0,Math.min(255,x*255))))}function Ae(n){return n.every(t=>t>=0&&t<=255)}function Xe(n,t,e=.001){let c=0,d=Oe;for(;d-c>e;){const m=(c+d)/2,v=ge(n,m,t);Ae(v)?c=m:d=m}return c}function Ne(n){return n.join(" ")}const Ue=2654435769,He=569420461,ze=1935289751,Fe=4294967296;function Je(n){let t=n|0;return()=>{t=t+Ue|0;let e=t^t>>>16;return e=Math.imul(e,He),e=e^e>>>15,e=Math.imul(e,ze),e=e^e>>>15,(e>>>0)/Fe}}function Ke(n){let t=0;for(let e=0;e<n.length;e++){const c=n.charCodeAt(e);t=(t<<5)-t+c|0}return t}function Q(n){const t=n.toString(),e=t.indexOf(".");return e===-1?0:t.length-e-1}function Y(n,t){const e=10**t;return Math.round(n*e)/e}function Z(n,t){const e=Q(t);return Y(Math.round(n/t)*t,e)}var $e=(n,t,e)=>t(e),We=(n,t,e)=>t(e),Ze=C('<div><div class="buttons svelte-2i7t1r"><button class="increment svelte-2i7t1r"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-2i7t1r"><path d="M4 16L12 8L20 16" stroke="black" stroke-width="4" class="svelte-2i7t1r"></path></svg></button> <button class="decrement svelte-2i7t1r"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-2i7t1r"><path d="M4 8L12 16L20 8" stroke-width="4" class="svelte-2i7t1r"></path></svg></button></div> <span class="value svelte-2i7t1r"> </span></div>');function Qe(n,t){de(t,!0);let e=B(t,"value",15),c=B(t,"stepSize",3,1),d=B(t,"min",19,()=>-1/0),m=B(t,"max",3,1/0),v=B(t,"disabled",3,!1),I=B(t,"unused",3,!1),x=B(t,"correct",3,!1),U=Te(t,["$$slots","$$events","$$legacy","accent","value","stepSize","min","max","disabled","unused","correct"]);function H(b,g){if(b==null)return"";const _=b.toString(),q=g-Q(b);return q<=0?_:_.indexOf(".")===-1?_+"."+"0".repeat(q):_+"0".repeat(q)}const S=L(()=>Q(c())),E=L(()=>H(e(),a(S)));function z(){e()===void 0&&e(0),e(Math.min(m(),Math.max(d(),Y(e()+c(),a(S)))))}function F(){e()===void 0&&e(0),e(Math.min(m(),Math.max(d(),Y(e()-c(),a(S)))))}let o=null,r=null;function i(b){b(),o=setTimeout(()=>{r=setInterval(b,80)},400)}function l(){o&&(clearTimeout(o),o=null),r&&(clearInterval(r),r=null)}var u=Ze();let k;var P=p(u),R=p(P);R.__mousedown=[$e,i,z],R.__mouseup=l;var G=T(R,2);G.__mousedown=[We,i,F],G.__mouseup=l,h(P);var A=T(P,2),y=p(A);h(A),h(u),V(()=>{k=qe(u,k,{class:"counter",...U,style:`--accent: ${t.accent??""}`},"svelte-2i7t1r"),N(u,"disabled",v()),N(u,"unused",I()),N(u,"correct",x()),R.disabled=v()||e()===m(),G.disabled=v()||e()===d(),me(y,a(E))}),se("mouseleave",R,l),se("mouseleave",G,l),f(n,u),ve()}Me(["mousedown","mouseup"]);var Ye=Ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><rect width="24" height="24" class="svelte-n2uegi"></rect><path d="M5 16L12 9L19 16" class="svelte-n2uegi"></path></svg>');function je(n,t){var e=Ye();V(()=>Be(e,`chevron ${t.direction??""} svelte-n2uegi`)),f(n,e)}var et=C('<span class="judgement svelte-u5q9bc">Perfect</span>'),tt=C('<span class="judgement svelte-u5q9bc"><!> <span class="judgement-text svelte-u5q9bc"> </span></span>'),st=C('<div class="guess-value svelte-u5q9bc"><div class="counter-wrapper svelte-u5q9bc"><!></div> <!></div>'),nt=C('<div class="current-guess svelte-u5q9bc"><div class="guess svelte-u5q9bc"></div> <!></div>'),rt=C('<div class="game svelte-u5q9bc"><div class="color-box svelte-u5q9bc"></div> <div class="guess-container svelte-u5q9bc"><div class="column-labels svelte-u5q9bc"><span class="label svelte-u5q9bc">L</span> <span class="label svelte-u5q9bc">C</span> <span class="label svelte-u5q9bc">H</span></div> <!></div> <!></div>');function vt(n,t){de(t,!0);const e=[{below:{direction:"up",text:"Lighter"},above:{direction:"down",text:"Darker"}},{below:{direction:"up",text:"More chroma"},above:{direction:"down",text:"Less chroma"}},{below:{direction:"right",text:"Further right"},above:{direction:"left",text:"Further left"}}],c=[.05,.02,20],d=[{min:0,max:1},{min:0,max:.4},{min:0,max:340}],m=340;let v=Se(!1);function I(o,r){return o.length===r.length&&o.every((i,l)=>i===r[l])}function x(o,r){const i=s.oklchValues[o];if(r===i)return"Perfect";if(r<i)return e[o].below;if(r>i)return e[o].above}function U(){const o=Ke(Re(s.date)),r=Je(o),i=Z(r(),c[0]),l=Z(r()*m,c[2]),u=Xe(i,l),k=Z(r()*u,c[1]);return[i,k,l]}function H(){Ge(v,!0);const o=s.guesses[s.currentGuessIndex];if(o.some(i=>i===void 0))return;if(I(o,s.oklchValues)){s.won=!0,s.ended=!0,s.currentGuessIndex+=1,W(),ue("/lchok/results");return}const r=s.currentGuessIndex+1<s.guesses.length;if(!s.ended&&r){const i=s.guesses[s.currentGuessIndex+1];o.forEach((l,u)=>{i[u]=l})}s.currentGuessIndex+=1,s.currentGuessIndex===s.guesses.length&&(s.ended=!0),W()}Le(()=>{Ce()&&ke(s.date)||(Object.assign(s,Ee()),s.oklchValues=U(),s.colorRGB=Ne(ge(...s.oklchValues)),s.guesses[0]=[0,0,0],s.currentGuessIndex=0,W())});var S=rt(),E=T(p(S),2),z=T(p(E),2);ce(z,17,()=>s.guesses,ie,(o,r,i)=>{var l=nt();const u=L(()=>i===s.currentGuessIndex),k=L(()=>i<s.currentGuessIndex),P=L(()=>!a(u)||s.ended),R=L(()=>i>s.currentGuessIndex||a(u)&&s.ended);var G=p(l);ce(G,21,()=>a(r),ie,(y,b,g)=>{var _=st(),q=p(_),fe=p(q),he=L(()=>a(r)[g]===s.oklchValues[g]&&a(k));Qe(fe,{get value(){return a(r)[g]},set value(J){a(r)[g]=J},get stepSize(){return c[g]},get min(){return d[g].min},get max(){return d[g].max},get disabled(){return a(P)},get unused(){return a(R)},get accent(){return`rgb(${s.colorRGB??""})`},get correct(){return a(he)}}),h(q);var be=T(q,2);D(be,()=>a(k),J=>{var j=re();const X=L(()=>x(g,a(r)[g]));var _e=oe(j);D(_e,()=>a(X)==="Perfect",K=>{var O=et();V(()=>N(O,"animated",a(v))),f(K,O)},K=>{var O=re(),pe=oe(O);D(pe,()=>a(X),xe=>{var $=tt(),ee=p($);je(ee,{get direction(){return a(X).direction}});var te=T(ee,2),we=p(te);h(te),h($),V(()=>me(we,a(X).text)),f(xe,$)},null,!0),f(K,O)}),f(J,j)}),h(_),f(y,_)}),h(G);var A=T(G,2);D(A,()=>a(u)&&!s.ended,y=>{le(y,{color:"#5cc466",class:"center-button",animated:!0,onclick:H,children:(b,g)=>{ae();var _=ne("SUBMIT");f(b,_)},$$slots:{default:!0}})}),h(l),f(o,l)}),h(E);var F=T(E,2);D(F,()=>s.ended,o=>{le(o,{color:"#f05454",class:"center-button",get animated(){return a(v)},onclick:()=>ue("/lchok/results"),children:(r,i)=>{ae();var l=ne("VIEW RESULTS");f(r,l)},$$slots:{default:!0}})}),h(S),V(()=>Pe(S,"style",`--color: ${s.colorRGB??""}`)),f(n,S),ve()}export{vt as component};
