import{j as xe,o as se,d as h,t as P,p as we,e as ne,l as re}from"../chunks/disclose-version.hFCv5rWK.js";import{y as de,E as x,G as k,F as b,C as N,g as r,B as ve,J as R,I as ae,K as Me,a3 as oe,D as Ie}from"../chunks/runtime.C39EhFeH.js";import{s as me}from"../chunks/render.DTTxfmh4.js";import{a as E,r as Se,o as Ge,i as X}from"../chunks/index-client.0S0UEiCn.js";import{e as ce,s as Le,f as Te,i as ie}from"../chunks/date.DdWoHAyD.js";import{c as ke,a as F,d as Re,l as qe,g as s,n as Be,e as Q,B as le,s as Ce}from"../chunks/Button.DpDhyKBR.js";import{g as ue}from"../chunks/entry.CHG-AweG.js";const S={l:[1,.3963377774,.2158037573],m:[1,-.1055613458,-.0638541728],s:[1,-.0894841775,-1.291485548]},G={r:[4.0767416621,-3.3077115913,.2309699292],g:[-1.2684380046,2.6097574011,-.3413193965],b:[-.0041960863,-.7034186147,1.707614701]},Ee=.0031308,Pe=.4;function ye(n,t,e){const c=S.l[0]*n+S.l[1]*t+S.l[2]*e,d=S.m[0]*n+S.m[1]*t+S.m[2]*e,m=S.s[0]*n+S.s[1]*t+S.s[2]*e,v=c**3,L=d**3,w=m**3;return[G.r[0]*v+G.r[1]*L+G.r[2]*w,G.g[0]*v+G.g[1]*L+G.g[2]*w,G.b[0]*v+G.b[1]*L+G.b[2]*w]}function Oe(n){return n<=Ee?12.92*n:1.055*n**(1/2.4)-.055}function ge(n,t,e){const c=e*Math.PI/180,d=t*Math.cos(c),m=t*Math.sin(c);return ye(n,d,m).map(Oe).map(w=>Math.round(Math.max(0,Math.min(255,w*255))))}function De(n){return n.every(t=>t>=0&&t<=255)}function Ve(n,t,e=.001){let c=0,d=Pe;for(;d-c>e;){const m=(c+d)/2,v=ge(n,m,t);De(v)?c=m:d=m}return c}function Ae(n){return n.join(" ")}const Xe=2654435769,Ne=569420461,Ue=1935289751,He=4294967296;function ze(n){let t=n|0;return()=>{t=t+Xe|0;let e=t^t>>>16;return e=Math.imul(e,Ne),e=e^e>>>15,e=Math.imul(e,Ue),e=e^e>>>15,(e>>>0)/He}}function Fe(n){let t=0;for(let e=0;e<n.length;e++){const c=n.charCodeAt(e);t=(t<<5)-t+c|0}return t}function Y(n,t){return Math.round(n/t)*t}var Je=(n,t,e)=>t(e),Ke=(n,t,e)=>t(e),$e=P('<div><div class="buttons svelte-2i7t1r"><button class="increment svelte-2i7t1r"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-2i7t1r"><path d="M4 16L12 8L20 16" stroke="black" stroke-width="4" class="svelte-2i7t1r"></path></svg></button> <button class="decrement svelte-2i7t1r"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-2i7t1r"><path d="M4 8L12 16L20 8" stroke-width="4" class="svelte-2i7t1r"></path></svg></button></div> <span class="value svelte-2i7t1r"> </span></div>');function We(n,t){de(t,!0);let e=E(t,"value",15),c=E(t,"stepSize",3,1),d=E(t,"min",19,()=>-1/0),m=E(t,"max",3,1/0),v=E(t,"disabled",3,!1),L=E(t,"unused",3,!1),w=E(t,"correct",3,!1),J=Se(t,["$$slots","$$events","$$legacy","accent","value","stepSize","min","max","disabled","unused","correct"]);function U(u){const p=u.toString(),f=p.indexOf(".");return f===-1?0:p.length-f-1}function q(u,p){const f=10**p;return Math.round(u*f)/f}function y(u,p){if(u==null)return"";const f=u.toString(),V=p-U(u);return V<=0?f:f.indexOf(".")===-1?f+"."+"0".repeat(V):f+"0".repeat(V)}const O=R(()=>U(c())),K=R(()=>y(e(),r(O)));function i(){e()===void 0&&e(0),e(Math.min(m(),Math.max(d(),q(e()+c(),r(O)))))}function a(){e()===void 0&&e(0),e(Math.min(m(),Math.max(d(),q(e()-c(),r(O)))))}let o=null,l=null;function _(u){u(),o=setTimeout(()=>{l=setInterval(u,80)},400)}function M(){o&&(clearTimeout(o),o=null),l&&(clearInterval(l),l=null)}var I=$e();let H;var B=x(I),C=x(B);C.__mousedown=[Je,_,i],C.__mouseup=M;var T=k(C,2);T.__mousedown=[Ke,_,a],T.__mouseup=M,b(B);var D=k(B,2),g=x(D);b(D),b(I),N(()=>{H=ke(I,H,{class:"counter",...J,style:`--accent: ${t.accent??""}`},"svelte-2i7t1r"),F(I,"disabled",v()),F(I,"unused",L()),F(I,"correct",w()),C.disabled=v()||e()===m(),T.disabled=v()||e()===d(),me(g,r(K))}),se("mouseleave",C,M),se("mouseleave",T,M),h(n,I),ve()}xe(["mousedown","mouseup"]);var Ze=we('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><rect width="24" height="24" class="svelte-n2uegi"></rect><path d="M5 16L12 9L19 16" class="svelte-n2uegi"></path></svg>');function Qe(n,t){var e=Ze();N(()=>Re(e,`chevron ${t.direction??""} svelte-n2uegi`)),h(n,e)}var Ye=P('<span class="judgement svelte-u5q9bc">Perfect</span>'),je=P('<span class="judgement svelte-u5q9bc"><!> <span class="judgement-text svelte-u5q9bc"> </span></span>'),et=P('<div class="guess-value svelte-u5q9bc"><div class="counter-wrapper svelte-u5q9bc"><!></div> <!></div>'),tt=P('<div class="current-guess svelte-u5q9bc"><div class="guess svelte-u5q9bc"></div> <!></div>'),st=P('<div class="game svelte-u5q9bc"><div class="color-box svelte-u5q9bc"></div> <div class="guess-container svelte-u5q9bc"><div class="column-labels svelte-u5q9bc"><span class="label svelte-u5q9bc">L</span> <span class="label svelte-u5q9bc">C</span> <span class="label svelte-u5q9bc">H</span></div> <!></div> <!></div>');function ut(n,t){de(t,!0);const e=[{below:{direction:"up",text:"Lighter"},above:{direction:"down",text:"Darker"}},{below:{direction:"up",text:"More chroma"},above:{direction:"down",text:"Less chroma"}},{below:{direction:"right",text:"Further right"},above:{direction:"left",text:"Further left"}}],c=[.05,.02,20],d=[{min:0,max:1},{min:0,max:.4},{min:0,max:340}],m=340;let v=Me(!1);function L(i,a){return i.length===a.length&&i.every((o,l)=>o===a[l])}function w(i,a){const o=s.oklchValues[i];if(a===o)return"Perfect";if(a<o)return e[i].below;if(a>o)return e[i].above}function J(){const i=Fe(Te(s.date)),a=ze(i),o=Y(a(),c[0]),l=Y(a()*m,c[2]),_=Ve(o,l),M=Y(a()*_,c[1]);return[o,M,l]}function U(){Ie(v,!0);const i=s.guesses[s.currentGuessIndex];if(i.some(o=>o===void 0))return;if(L(i,s.oklchValues)){s.won=!0,s.ended=!0,s.currentGuessIndex+=1,Q(),ue("/results");return}const a=s.currentGuessIndex+1<s.guesses.length;if(!s.ended&&a){const o=s.guesses[s.currentGuessIndex+1];i.forEach((l,_)=>{o[_]=l})}s.currentGuessIndex+=1,s.currentGuessIndex===s.guesses.length&&(s.ended=!0),Q()}Ge(()=>{qe()&&Le(s.date)||(Object.assign(s,Be()),s.oklchValues=J(),s.colorRGB=Ae(ge(...s.oklchValues)),s.guesses[0]=[0,0,0],s.currentGuessIndex=0,Q())});var q=st(),y=k(x(q),2),O=k(x(y),2);ce(O,17,()=>s.guesses,ie,(i,a,o)=>{var l=tt();const _=R(()=>o===s.currentGuessIndex),M=R(()=>o<s.currentGuessIndex),I=R(()=>!r(_)||s.ended),H=R(()=>o>s.currentGuessIndex||r(_)&&s.ended);var B=x(l);ce(B,21,()=>r(a),ie,(T,D,g)=>{var u=et(),p=x(u),f=x(p),V=R(()=>r(a)[g]===s.oklchValues[g]&&r(M));We(f,{get value(){return r(a)[g]},set value($){r(a)[g]=$},get stepSize(){return c[g]},get min(){return d[g].min},get max(){return d[g].max},get disabled(){return r(I)},get unused(){return r(H)},get accent(){return`rgb(${s.colorRGB??""})`},get correct(){return r(V)}}),b(p);var fe=k(p,2);X(fe,()=>r(M),$=>{var j=re();const z=R(()=>w(g,r(a)[g]));var he=oe(j);X(he,()=>r(z)==="Perfect",W=>{var A=Ye();N(()=>F(A,"animated",r(v))),h(W,A)},W=>{var A=re(),be=oe(A);X(be,()=>r(z),_e=>{var Z=je(),ee=x(Z);Qe(ee,{get direction(){return r(z).direction}});var te=k(ee,2),pe=x(te);b(te),b(Z),N(()=>me(pe,r(z).text)),h(_e,Z)},null,!0),h(W,A)}),h($,j)}),b(u),h(T,u)}),b(B);var C=k(B,2);X(C,()=>r(_)&&!s.ended,T=>{le(T,{color:"#5cc466",class:"center-button",animated:!0,onclick:U,children:(D,g)=>{ae();var u=ne("SUBMIT");h(D,u)},$$slots:{default:!0}})}),b(l),h(i,l)}),b(y);var K=k(y,2);X(K,()=>s.ended,i=>{le(i,{color:"#f05454",class:"center-button",get animated(){return r(v)},onclick:()=>ue("/lchok/results"),children:(a,o)=>{ae();var l=ne("VIEW RESULTS");h(a,l)},$$slots:{default:!0}})}),b(q),N(()=>Ce(q,"style",`--color: ${s.colorRGB??""}`)),h(n,q),ve()}export{ut as component};
